#!/bin/bash

sourceDir=$1

if [ ! -d $sourceDir ]; then
	echo "No content to import."
	exit 0
fi

if [ -d $sourceDir/files ]; then
	echo "Importing files from $sourceDir/files"
	run-maintenance importImages $sourceDir/files
fi
# For b/c and compatibility to "migrate-confluence" results we also check for `images/` directory
if [ -d $sourceDir/images ]; then
	echo "Importing images from $sourceDir/images"
	run-maintenance importImages $sourceDir/images
fi

for xmlfile in $sourceDir/*.xml; do
	if [ -f "$xmlfile" ]; then
		echo "Importing content from $xmlfile"
		run-maintenance importDump "$xmlfile"
	fi
done
